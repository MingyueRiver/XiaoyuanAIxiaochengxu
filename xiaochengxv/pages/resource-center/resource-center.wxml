<view class="resource-center-page">
  <!-- é¡¶éƒ¨æœç´¢æ  + ç­›é€‰åŒº -->
  <view class="header-container">
    <!-- æœç´¢æ¡† -->
    <view class="search-box" bindtap="goToSearch">
      <text class="search-icon">ğŸ”</text>
      <text class="search-text">æœç´¢èµ„æºåç§°ã€ç±»å‹æˆ–æ ‡ç­¾...</text>
    </view>

    <!-- ç­›é€‰æ ï¼šç±»å‹ç­›é€‰ + çŠ¶æ€ç­›é€‰ -->
    <view class="filter-container">
      <!-- ç±»å‹ç­›é€‰ï¼ˆæ¨ªå‘æ»šåŠ¨ï¼‰- å…¼å®¹ typeFilterList æœªå®šä¹‰ -->
      <scroll-view scroll-x class="type-filter-scroll" enable-flex>
        <view class="filter-item {{activeType === item.key ? 'active' : ''}}"
              wx:for="{{typeFilterList || []}}"
              wx:key="key"
              bindtap="switchFilter"
              data-type="type"
              data-value="{{item.key}}">
          <text class="filter-text">{{item.name}}</text>
        </view>
      </scroll-view>

      <!-- çŠ¶æ€ç­›é€‰ï¼ˆæ¨ªå‘æ»šåŠ¨ï¼‰- å…¼å®¹ statusFilterList æœªå®šä¹‰ -->
      <scroll-view scroll-x class="status-filter-scroll" enable-flex>
        <view class="filter-item {{activeStatus === item.key ? 'active' : ''}}"
              wx:for="{{statusFilterList || []}}"
              wx:key="key"
              bindtap="switchFilter"
              data-type="status"
              data-value="{{item.key}}">
          <text class="filter-text">{{item.name}}</text>
        </view>
      </scroll-view>
    </view>

    <!-- æ’åº + å¸ƒå±€åˆ‡æ¢ -->
    <view class="operation-bar">
      <view class="sort-group">
        <view class="sort-item" bindtap="sortResources" data-type="views">
          <text class="sort-icon">ğŸ‘ï¸</text>
          <text class="sort-text">æµè§ˆé‡</text>
        </view>
        <view class="sort-item" bindtap="sortResources" data-type="time">
          <text class="sort-icon">â±ï¸</text>
          <text class="sort-text">æœ€æ–°</text>
        </view>
      </view>
      <view class="layout-btn" bindtap="toggleLayout">
        <text class="layout-icon">{{isGrid ? 'ğŸ“‹' : 'ğŸŸ¦'}}</text>
        <text class="layout-text">{{isGrid ? 'åˆ—è¡¨' : 'ç½‘æ ¼'}}</text>
      </view>
    </view>
  </view>

  <!-- èµ„æºå±•ç¤ºåŒº - æ ¸å¿ƒä¿®å¤ï¼šç§»é™¤å¯é€‰é“¾ ?. -->
  <view class="resource-content">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{isLoading}}">
      <text class="loading-icon">â³</text>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç½‘æ ¼å¸ƒå±€ - ä¿®å¤ï¼šç”¨ && æ›¿ä»£ ?. åšå…¼å®¹åˆ¤æ–­ -->
    <view class="grid-layout" wx:elif="{{isGrid && filteredResources && filteredResources.length > 0}}">
      <view class="resource-card"
            wx:for="{{filteredResources}}"
            wx:key="id"
            bindtap="goToDetail"
            data-id="{{item.id}}">
        <!-- èµ„æºå°é¢å›¾ - é»˜è®¤å›¾å…œåº• -->
        <view class="card-cover">
          <image src="{{item.coverUrl || '/images/resource-default.png'}}" mode="aspectFill"></image>
          <!-- å…è´¹/ä»˜è´¹æ ‡ç­¾ -->
          <view class="tag {{item.isFree ? 'free-tag' : 'paid-tag'}}">
            <text class="tag-text">{{item.isFree ? 'å…è´¹' : 'Â¥' + (item.price || 0)}}</text>
          </view>
        </view>
        <!-- èµ„æºä¿¡æ¯ -->
        <view class="card-info">
          <text class="card-title">{{item.title || 'æœªçŸ¥èµ„æº'}}</text>
          <text class="card-desc">{{item.desc || 'æš‚æ— æè¿°'}}</text>
          <view class="card-meta">
            <text class="meta-author">{{item.author || 'æœªçŸ¥ä½œè€…'}}</text>
            <text class="meta-separator">Â·</text>
            <text class="meta-views">{{item.views || 0}}æ¬¡æµè§ˆ</text>
            <text class="meta-separator">Â·</text>
            <text class="meta-collect">{{item.collectCount || 0}}äººæ”¶è—</text>
          </view>
          <text class="card-time">{{item.updateTime || 'æš‚æ— æ›´æ–°æ—¶é—´'}}</text>
        </view>
      </view>
    </view>

    <!-- åˆ—è¡¨å¸ƒå±€ - ä¿®å¤ï¼šç”¨ && æ›¿ä»£ ?. åšå…¼å®¹åˆ¤æ–­ -->
    <view class="list-layout" wx:elif="{{!isGrid && filteredResources && filteredResources.length > 0}}">
      <view class="resource-item"
            wx:for="{{filteredResources}}"
            wx:key="id"
            bindtap="goToDetail"
            data-id="{{item.id}}">
        <!-- èµ„æºå°é¢å›¾ - é»˜è®¤å›¾å…œåº• -->
        <view class="item-cover">
          <image src="{{item.coverUrl || '/images/resource-default.png'}}" mode="aspectFill"></image>
          <view class="tag {{item.isFree ? 'free-tag' : 'paid-tag'}}">
            <text class="tag-text">{{item.isFree ? 'å…è´¹' : 'Â¥' + (item.price || 0)}}</text>
          </view>
        </view>
        <!-- èµ„æºä¿¡æ¯ -->
        <view class="item-info">
          <text class="item-title">{{item.title || 'æœªçŸ¥èµ„æº'}}</text>
          <text class="item-desc">{{item.desc || 'æš‚æ— æè¿°'}}</text>
          <view class="item-meta">
            <view class="meta-left">
              <text class="meta-author">{{item.author || 'æœªçŸ¥ä½œè€…'}}</text>
              <text class="meta-separator">Â·</text>
              <text class="meta-type">{{typeMap[item.type] || item.type || 'æœªçŸ¥ç±»å‹'}}</text>
              <text class="meta-separator">Â·</text>
              <text class="meta-time">{{item.updateTime || 'æš‚æ— æ›´æ–°æ—¶é—´'}}</text>
            </view>
            <view class="meta-right">
              <text class="meta-views">{{item.views || 0}}æ¬¡æµè§ˆ</text>
              <text class="meta-separator">Â·</text>
              <text class="meta-collect">{{item.collectCount || 0}}äººæ”¶è—</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- æ— æ•°æ®æç¤º -->
    <view class="empty-container" wx:else>
      <text class="empty-icon">ğŸ“‚</text>
      <text class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„èµ„æº</text>
      <text class="empty-subtext">æ¢ä¸ªç­›é€‰æ¡ä»¶è¯•è¯•å§~</text>
    </view>
  </view>
 </view> 