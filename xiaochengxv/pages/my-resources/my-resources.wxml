<view class="container">
  <!-- æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tab-bar">
    <view class="tab-item {{activeTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-tab="all">
      <text>å…¨éƒ¨</text>
    </view>
    <view class="tab-item {{activeTab === 'notes' ? 'active' : ''}}" bindtap="switchTab" data-tab="notes">
      <text>ç¬”è®°</text>
    </view>
    <view class="tab-item {{activeTab === 'videos' ? 'active' : ''}}" bindtap="switchTab" data-tab="videos">
      <text>è§†é¢‘</text>
    </view>
    <view class="tab-item {{activeTab === 'documents' ? 'active' : ''}}" bindtap="switchTab" data-tab="documents">
      <text>æ–‡æ¡£</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{isEmpty}}" class="empty-container">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-title">è¿˜æ²¡æœ‰èµ„æº</text>
    <text class="empty-desc">åˆ†äº«ä½ çš„å­¦ä¹ èµ„æ–™ï¼Œå¸®åŠ©å…¶ä»–å­¦ç”Ÿ</text>
    <button class="upload-btn" bindtap="uploadNewResource">ä¸Šä¼ ç¬¬ä¸€ä¸ªèµ„æº</button>
  </view>

  <!-- èµ„æºåˆ—è¡¨ -->
  <view wx:else class="resources-list">
    <view class="resource-card" wx:for="{{filteredResources}}" wx:key="_id">
      <!-- èµ„æºå°é¢å’ŒåŸºæœ¬ä¿¡æ¯ -->
      <view class="resource-header">
        <image src="{{item.coverUrl || '/images/resource-default.png'}}" class="resource-cover" mode="aspectFill"></image>
        <view class="resource-info">
          <text class="resource-type-badge">{{item.type}}</text>
          <text class="resource-title">{{item.title}}</text>
          <text class="resource-desc">{{item.description}}</text>
          <view class="resource-meta">
            <text class="meta-item">ğŸ‘ï¸ {{item.views}}</text>
            <text class="meta-item">â¬‡ï¸ {{item.downloads}}</text>
            <text class="meta-item">â­ {{item.stats.rating}}</text>
          </view>
        </view>
      </view>

      <!-- ä»·æ ¼å’Œæ“ä½œæŒ‰é’® -->
      <view class="resource-footer">
        <view class="price-info">
          <text wx:if="{{item.isFree}}" class="free-badge">å…è´¹</text>
          <text wx:else class="price">Â¥{{item.price}}</text>
          <text class="upload-date">ä¸Šä¼ äº {{item.uploadDate}}</text>
        </view>
        
        <view class="action-buttons">
          <button class="action-btn primary-btn" bindtap="goToResourceDetail" data-id="{{item._id}}">æŸ¥çœ‹</button>
          <button class="action-btn secondary-btn" bindtap="editResource" data-id="{{item._id}}">ç¼–è¾‘</button>
          <button class="action-btn danger-btn" bindtap="deleteResource" data-id="{{item._id}}">åˆ é™¤</button>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¸Šä¼ æ–°èµ„æºæµ®åŠ¨æŒ‰é’® -->
  <view wx:if="{{!isEmpty && !isLoading}}" class="fab-container">
    <button class="fab-button" bindtap="uploadNewResource">+</button>
  </view>
</view>
